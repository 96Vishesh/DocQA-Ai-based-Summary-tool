<div class="file-upload card" [class.has-file]="status !== 'idle'">
    @if (status === 'idle') {
    <div class="dropzone" [class.active]="isDragOver" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)" (click)="fileInput.click()">
        <input #fileInput type="file" hidden accept=".pdf,audio/*,video/*" (change)="onFileSelect($event)">
        <div class="dropzone-content">
            <div class="dropzone-icon">☁️</div>
            <h3>{{ isDragOver ? 'Drop your file here' : 'Drag & drop a file here' }}</h3>
            <p>or click to browse</p>
            <div class="supported-formats">
                <span class="format-badge pdf">PDF</span>
                <span class="format-badge audio">Audio</span>
                <span class="format-badge video">Video</span>
            </div>
            <p class="size-limit">Max file size: 100MB</p>
        </div>
    </div>
    } @else {
    <div class="upload-progress">
        <div class="upload-file-info">
            <div class="file-icon"
                [class]="file?.type?.startsWith('video') ? 'video' : file?.type?.startsWith('audio') ? 'audio' : 'pdf'">
                {{ getFileIcon() }}
            </div>
            <div class="file-details">
                <span class="file-name">{{ file?.name }}</span>
                <span class="upload-message">{{ message }}</span>
            </div>
            @if (status === 'uploading') {
            <button class="btn btn-icon btn-secondary" (click)="reset()">✕</button>
            } @else if (status === 'success') {
            <div class="success-icon">✓</div>
            }
        </div>

        @if (status === 'uploading') {
        <div class="progress-bar">
            <div class="progress-fill" style="width: 100%;"></div>
        </div>
        }

        @if (status === 'error') {
        <button class="btn btn-primary" (click)="reset()">Try Again</button>
        }
    </div>
    }
</div>